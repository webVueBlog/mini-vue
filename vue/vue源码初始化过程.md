## Vue 初始化过程

new Vue(options) 发生了什么？

先找到Vue的构造函数时在哪声明的，有两个方法：

- 从rollup配置文件中找到编译的入口，然后一步步找到Vue构造函数，这种方式。
- 通过编写示例代码，然后打断点的方式，一步到位。

采用第二种方式，写示例，打断点，一步到位。

vue的初始化过程 new Vue(options) 都做了什么？

1. 处理组件配置项
   - 初始化根组件时进行了选项合并操作，将全局配置合并到根组件的局部配置上
   - 初始化每个子组件时做了一些性能优化，将组件配置对象上的一些深层次属性放到vm.$options选项中，以提高代码的执行效率
2. 初始化组件实例的关系属性，比如 $parent , $children, $root, $refs等
3. 处理自定义事件
4. 调用beforeCreate钩子函数
5. 初始化组件的inject配置项，得到 `result[key] = val` 形式的配置对象，然后对改配置对象进行响应式处理，并代理每个key到vm实例上
6. 数据响应式，处理props，methods，data，computed，watch等选项
7. 解析组件配置项上的provide对象，将其挂载到`vm._provided`属性上
8. 调用created钩子函数
9. 如果发现配置项上有el选项，则自动调用$mount方法，也就是说有了el选项，就不需要再手动调用$mount方法，反之，没提供el选项则必须调用$mount
10. 接下来则进入挂载阶段